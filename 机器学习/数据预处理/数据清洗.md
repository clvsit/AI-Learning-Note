# 数据清洗


## 数据类型转换

### 类别型特征转换
类别型特征（Categorical Feature）主要是指性别（男、女）、血型（A、B、AB、O）等只在有限选项内取值的特征。类别型特征原始输入通常是字符串形式，除了决策树等少数模型能直接处理字符串形式的输入，对于逻辑回归、支持向量机等模型来说，类别型特征必须经过处理转换成数值型特征才能正确工作，这个过程通常被称为类别型数据离散化。

【常用的方法】：
- 序号编码（Ordinal Encoding）
- 独热编码（One-hot Encoding）
- 二进制编码（Binary Encoding）

#### 序号编码
序号编码通常用于**处理类别间具有大小关系的数据**。

【举例】：成绩可以分为低、中、高三档，并且存在“高>中>低”的排序关系。序号编码会按照大小关系对类别型特征赋予一个数值 ID，例如高表示为 3、中表示为 2、低表示为 1，转换后依然保留了大小关系。

#### 独热编码
独热编码通常用于**处理类别间不具有大小关系的特征**。

【举例】：血型一共有 4 个取值且不存在“序”的关系，独热编码会把血型变成一个 4 维稀疏向量，A 型血表示为 (1, 0, 0, 0)，B 型血表示为 (0, 1, 0, 0)，AB 型表示为 (0, 0, 1, 0)，O 型血表示为 (0, 0, 0, 1)。

【注意】：对于类别取值较多的情况下使用独热编码需要注意以下问题。
- 使用稀疏向量来节省空间：在独热编码下，特征向量只有某一维取值为 1，其他位置取值均为 0.因此可以利用向量的稀疏表示有效地节省空间，并且目前大部分的算法均接受稀疏向量形式的输入。
- 配合特征选择来降低维度：高维度特征会带来几方面的问题。具体内容可参考

#### 二进制编码
二进制编码同独热编码，都用于**处理类别间不具有大小关系的特征**。

【步骤】：主要分为两步。
- 先用序号编码给每个类别赋予一个类别 ID；
- 然后将类别 ID 对应的二进制编码作为结果。

【举例】：沿用独热编码中的例子，下表为二进制编码的过程。

血型 | 类别 ID | 二进制表示 | 独热编码
:---:|:---:|:---:|:---:|
A | 1 | 001 | 1000
B | 2 | 010 | 0100
AB | 3 | 011 | 0010
O | 4 | 100 | 0001

A 型血的 ID 为 1，二进制表示为 001；B 型血的 ID 为 2，二进制表示为 010；以此类推可以得到 AB 型血和 O 型血的二进制表示。

【本质】：可以看出，二进制编码本质上是利用二进制对 ID 进行哈希映射，最终得到 0/1 特征向量，且维数少于独热编码，节省了存储空间。